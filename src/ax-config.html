<script>
    import axios from 'axios';
    import store from './store'
    export default {
        store: () => store,
        tag: 'ax-config',
        methods: {
            config(conf) {
                if (conf.baseUrl) {
                    axios.defaults.baseUrl = conf.baseUrl;
                }
                if (conf.header) {
                    axios.defaults.headers = { ...conf.header
                    };
                }
                this.store.set({
                    config: conf
                });
                console.log(this.store.get())
            }
        },
        oncreate() {
            if (this.innerHTML) {
                // Get the config
                let config = JSON.parse(this.innerHTML);
                this.config(config);
                this.innerHTML = "";
                this.store.fire("CONFIG_SET", config);
            }
        }
    }
</script>

<style>
    :global(ax-config) {
        display: none;
    }
</style>